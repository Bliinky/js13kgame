<!DOCTYPE html>
<html>
<head>
<title>js13kgame</title>
<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport">
<meta charset="utf-8"></head>
<style>body,html{display:block;height:100%}canvas{border:1px solid #000;position:absolute;top:10%;left:10%}</style>
<body></body>
<script>
"use strict";function _classCallCheck(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}!function(){var t=function t(n,e){_classCallCheck(this,t),this.entities=n,this.gravity=e,this.movableEntities=this.entities.filter(function(t){return t.isMovable}),this.controllableEntities=this.entities.filter(function(t){return t.isControllable})},n=function t(n,e,i,o,r,c,l,s,a,u,h,f){_classCallCheck(this,t),this.x=n,this.y=e,this.width=i,this.height=o,this.velX=r,this.velY=c,this.collisionFactorX=l,this.collisionFactorY=s,this.forme=a,this.color=u,this.isMovable=h,this.isControllable=f},e=["_:2.10...","/:2.4..."],i=function(t){return o(e[t])},o=function(e){var i=new n(100,10,10,10,0,0,0,0,"circle","red",!0,!0),o=new n(0,185,500,10,0,0,0,-.2,"square","blue",!1,!1);return new t([i,o],.1)},r=[[],[],[]],c=function(){return function(t){var n=t.keyCode-37;void 0!==r[n]&&r[n].forEach(function(t){return t()})}},l={onLeft:function(t){return r[0].push(t)},onUp:function(t){return r[1].push(t)},onRight:function(t){return r[2].push(t)}};window.addEventListener("keyup",c(),!1),window.addEventListener("keydown",c(),!1);var s=20,a=-10,u=function(t){l.onLeft(function(){console.log("left"),t.controllableEntities.forEach(function(t){return t.velX=-s})}),l.onRight(function(){return t.controllableEntities.forEach(function(t){return t.velX=s})}),l.onUp(function(){return t.controllableEntities.forEach(function(t){return t.velY+=a})})},h=1,f={update:function(t){t.movableEntities.forEach(function(n){n.x+=n.velX,n.velX=0,n.y+=n.velY,n.velY+=t.gravity||h})}},d=function(t,n){t.clearRect(0,0,600,800),t.stroke(),t.beginPath(),t.rect(n.x,n.y,n.width,n.height),t.fillStyle=n.color,t.fill(),t.closePath(),t.stroke()},v={render:function(t,n,e){var i=n.getContext("2d"),o=e.getContext("2d");t.entities.forEach(function(t){t.isMovable?d(i,t):d(o,t)})}},E=function(t,n){return!(t.x>=n.x+n.width||t.x+t.width<=n.x||t.y>=n.y+n.height||t.y+t.height<=n.y)},g={check:function(t){var n=!1;return t.entities.forEach(function(n){t.entities.forEach(function(t){n!==t&&E(n,t)&&(n.velX*=t.collisionFactorX,n.velY*=t.collisionFactorY)})}),n}},y=60,w=function(t,n,e){var i=function i(){f.update(t),v.render(t,n,e),g.check(t),setTimeout(i,1/y*1e3)};i()},b=document.createElement("canvas");b.width="600",b.height="800",document.getElementsByTagName("body")[0].appendChild(b);var m=document.createElement("canvas");m.width="600",m.height="800",document.getElementsByTagName("body")[0].appendChild(m);var C=0,p=i(C);u(p),w(p,m,b)}();
</script>
</html>
