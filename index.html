<!DOCTYPE html>
<html>
<head>
<title>js13kgame</title>
<meta content="width=device-width,initial-scale=1,maximum-scale=1,user-scalable=0" name="viewport">
<meta charset="utf-8"></head>
<style>body,html{display:block;height:100%}canvas{border:1px solid #000;position:absolute;top:10%;left:10%}</style>
<body></body>
<script>
"use strict";function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}!function(){var t=function t(e,n){_classCallCheck(this,t),this.entities=e,this.gravity=n,this.movableEntities=this.entities.filter(function(t){return t.isMovable}),this.controllableEntities=this.entities.filter(function(t){return t.isControllable})},e=function t(e,n,i,o,l,c,r,s,a,u,h,f){_classCallCheck(this,t),this.x=e,this.y=n,this.width=i,this.height=o,this.velX=l,this.velY=c,this.collisionFactorX=r,this.collisionFactorY=s,this.forme=a,this.color=u,this.isMovable=h,this.isControllable=f},n=["_:2.10...","/:2.4..."],i=function(t){return o(n[t])},o=function(n){var i=new e(100,10,10,10,0,0,0,0,"circle","red",!0,!0),o=new e(0,185,500,10,0,0,0,2,"square","blue",!1,!1);return new t([i,o],1)},l=[[],[],[]],c=function(){return function(t){var e=t.keyCode-37;void 0!==l[e]&&l[e].forEach(function(t){return t()})}},r={onLeft:function(t){return l[0].push(t)},onUp:function(t){return l[1].push(t)},onRight:function(t){return l[2].push(t)}};window.addEventListener("keyup",c(),!1),window.addEventListener("keydown",c(),!1);var s=20,a=-10,u=function(t){r.onLeft(function(){console.log("left"),t.controllableEntities.forEach(function(t){return t.velX=-s})}),r.onRight(function(){return t.controllableEntities.forEach(function(t){return t.velX=s})}),r.onUp(function(){return t.controllableEntities.forEach(function(t){return t.velY+=a})})},h=1,f={update:function(t){t.movableEntities.forEach(function(e){e.x+=e.velX,e.velX=0,e.y+=e.velY,e.velY+=t.gravity||h})}},v=function(t,e){t.clearRect(0,0,600,800),t.stroke(),t.beginPath(),t.rect(e.x,e.y,e.width,e.height),t.fillStyle=e.color,t.fill(),t.closePath(),t.stroke()},d={render:function(t,e,n){var i=e.getContext("2d"),o=n.getContext("2d");t.entities.forEach(function(t){t.isMovable?v(i,t):v(o,t)})}},E=function(t,e){return!(t.x>=e.x+e.width||t.x+t.width<=e.x||t.y>=e.y+e.height||t.y+t.height<=e.y)},g={check:function(t){var e=!1;return t.entities.forEach(function(e){t.entities.forEach(function(t){e!==t&&E(e,t)&&(e.velX=e.velX+e.velX*t.collisionFactorX,e.velY=e.velY+e.velY*t.collisionFactorY,t.velX=t.velX+t.velX*e.collisionFactorX,t.velY=t.velY+t.velY*e.collisionFactorY)})}),e}},y=60,w=function(t,e,n){var i=function i(){f.update(t),d.render(t,e,n),g.check(t),setTimeout(i,1/y*1e3)};i()},b=document.createElement("canvas");b.width="600",b.height="800",document.getElementsByTagName("body")[0].appendChild(b);var m=document.createElement("canvas");m.width="600",m.height="800",document.getElementsByTagName("body")[0].appendChild(m);var C=0,X=i(C);u(X),w(X,m,b)}();
</script>
</html>
